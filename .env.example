# =============================================================================
# LSTM PFD Dashboard - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# Generate secrets: python -c 'import secrets; print(secrets.token_hex(32))'
# =============================================================================

# -----------------------------------------------------------------------------
# CRITICAL SECURITY - REQUIRED
# -----------------------------------------------------------------------------
# These MUST be set - the application will not start without them

# Database connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://lstm_user:secure_password_here@localhost:5432/lstm_dashboard

# Application secret key (minimum 32 characters)
# Used for session management and CSRF protection
SECRET_KEY=your-secret-key-here-minimum-32-chars-change-this

# JWT authentication secret (minimum 32 characters)
# Used for API token signing
JWT_SECRET_KEY=your-jwt-secret-here-minimum-32-chars-change-this

# -----------------------------------------------------------------------------
# Environment & Debug
# -----------------------------------------------------------------------------
ENV=development
DEBUG=True

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# Used for caching and Celery task queue
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# -----------------------------------------------------------------------------
# Celery Configuration
# -----------------------------------------------------------------------------
# Task queue for background jobs (training, HPO, etc.)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Application Server
# -----------------------------------------------------------------------------
APP_HOST=0.0.0.0
APP_PORT=8050

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# GPU Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of GPU IDs to use (e.g., "0,1,2")
CUDA_VISIBLE_DEVICES=0

# -----------------------------------------------------------------------------
# Rate Limiting (Feature #1)
# -----------------------------------------------------------------------------
# Maximum requests per hour per API key
API_KEY_RATE_LIMIT_DEFAULT=1000
# Allow requests if Redis is down (True/False)
RATE_LIMIT_FAIL_OPEN=True

# -----------------------------------------------------------------------------
# Email Notifications (Feature #3) - OPTIONAL
# -----------------------------------------------------------------------------
# Enable/disable email notifications
EMAIL_ENABLED=False
# Email provider: 'sendgrid' or 'smtp'
EMAIL_PROVIDER=sendgrid
EMAIL_FROM=noreply@lstm-dashboard.com
EMAIL_FROM_NAME=LSTM Bearing Fault Diagnosis

# SendGrid Configuration (if EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=

# SMTP Configuration (if EMAIL_PROVIDER=smtp)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=

# Email rate limiting (max emails per minute)
EMAIL_RATE_LIMIT=100

# -----------------------------------------------------------------------------
# Webhook Notifications (Feature #4) - OPTIONAL
# -----------------------------------------------------------------------------
# Enable/disable webhook integrations
NOTIFICATIONS_SLACK_ENABLED=True
NOTIFICATIONS_TEAMS_ENABLED=True
NOTIFICATIONS_WEBHOOK_ENABLED=True

# Slack Configuration
SLACK_RATE_LIMIT_PER_WEBHOOK=1
SLACK_RETRY_ATTEMPTS=3
SLACK_TIMEOUT_SECONDS=10

# Microsoft Teams Configuration
TEAMS_RATE_LIMIT_PER_WEBHOOK=2
TEAMS_RETRY_ATTEMPTS=3
TEAMS_TIMEOUT_SECONDS=10

# Custom Webhook Configuration
WEBHOOK_CUSTOM_TIMEOUT_SECONDS=5
WEBHOOK_CUSTOM_RETRY_ATTEMPTS=2

# Webhook feature toggles
NOTIFICATIONS_ENABLE_RICH_FORMATTING=True
NOTIFICATIONS_ENABLE_MENTIONS=True

# -----------------------------------------------------------------------------
# Tags & Search (Feature #5)
# -----------------------------------------------------------------------------
FEATURE_TAGS_ENABLED=True
FEATURE_SEARCH_ENABLED=True
FEATURE_SAVED_SEARCHES_ENABLED=True
FEATURE_TAG_SUGGESTIONS_ENABLED=True

# Search engine: 'postgres' or 'elasticsearch'
SEARCH_ENGINE=postgres
SEARCH_MAX_RESULTS=100

# Tag system configuration
TAGS_MAX_PER_EXPERIMENT=10
TAGS_MAX_LENGTH=50
TAGS_CASE_SENSITIVE=False
TAGS_ALLOW_SPACES=False

# Performance tuning
SEARCH_DEBOUNCE_MS=300
TAG_AUTOCOMPLETE_MIN_CHARS=2
TAG_AUTOCOMPLETE_MAX_RESULTS=10
SEARCH_CACHE_TTL_SECONDS=60

# -----------------------------------------------------------------------------
# Advanced Search - Elasticsearch (OPTIONAL)
# -----------------------------------------------------------------------------
# Only required if SEARCH_ENGINE=elasticsearch
# ELASTICSEARCH_URL=http://localhost:9200
# ELASTICSEARCH_INDEX=lstm_experiments
# ELASTICSEARCH_USERNAME=
# ELASTICSEARCH_PASSWORD=

# -----------------------------------------------------------------------------
# Production Security Headers (OPTIONAL)
# -----------------------------------------------------------------------------
# Enable security headers for production
# SECURE_SSL_REDIRECT=True
# SESSION_COOKIE_SECURE=True
# CSRF_COOKIE_SECURE=True
# SECURE_HSTS_SECONDS=31536000

# -----------------------------------------------------------------------------
# Monitoring & Alerts (OPTIONAL)
# -----------------------------------------------------------------------------
# System monitoring thresholds
# CPU_ALERT_THRESHOLD=90
# MEMORY_ALERT_THRESHOLD=90
# DISK_ALERT_THRESHOLD=90

# -----------------------------------------------------------------------------
# Database Connection Pool (OPTIONAL)
# -----------------------------------------------------------------------------
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_TIMEOUT=30

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# 1. NEVER commit the actual .env file to version control
# 2. Always use strong, randomly generated secrets in production
# 3. Rotate secrets regularly (every 90 days minimum)
# 4. Use different secrets for development, staging, and production
# 5. Store production secrets in a secure vault (e.g., AWS Secrets Manager, HashiCorp Vault)
